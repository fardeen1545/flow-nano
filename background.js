chrome.action.onClicked.addListener(e=>{e.id&&chrome.sidePanel.open({windowId:e.windowId})}),chrome.runtime.onMessage.addListener((e,o,r)=>{if("openDownloadsSettings"===e.type&&chrome.tabs.create({url:"chrome://settings/downloads"}),"downloadFile"===e.type){if(e.url&&e.filename)return chrome.downloads.download({url:e.url,filename:e.filename,conflictAction:"uniquify"},e=>{chrome.runtime.lastError?r({success:!1,error:chrome.runtime.lastError.message}):r(void 0===e?{success:!1,error:"Download failed: downloadId is undefined."}:{success:!0,downloadId:e})}),!0;r({success:!1,error:"Invalid message parameters (missing url or filename)"})}});