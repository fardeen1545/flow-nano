import{state as o}from"./state.js";import{dom as t}from"./dom.js";import{logMessage as e,renderToolsList as n,updateLiveStatus as i}from"./ui.js";import{i18n as a}from"./i18n.js";const r={selectors:{PROMPT_TEXTAREA_ID:"PINHOLE_TEXT_AREA_ELEMENT_ID",GENERATE_BUTTON_XPATH:"//button[.//i[text()='arrow_forward']] | (//button[.//i[normalize-space(text())='arrow_forward']])",NEW_PROJECT_BUTTON_XPATH:"//button[.//i[normalize-space(text())='add_2']] | (//button[.//i[normalize-space(.)='add_2']])",GRID_VIEW_BUTTON_XPATH:"(//button[@role='radio' and .//i[normalize-space(text())='grid_on']]) | (//button[.//i[normalize-space(.)='grid_view']])",VIDEOCAM_BUTTON_XPATH:"//button[@role='radio' and .//i[normalize-space()='videocam']]",PROMPT_POLICY_ERROR_POPUP_XPATH:"//li[@data-sonner-toast and .//i[normalize-space(text())='error'] and not(.//*[contains(., '5')])]",QUEUE_FULL_POPUP_XPATH:"//li[@data-sonner-toast and .//i[normalize-space(text())='error'] and .//*[contains(., '5')]]",START_IMAGE_ADD_BUTTON_XPATH:"(//button[.//div[@data-type='button-overlay'] and .//i[text()='add']])[1]",HIDDEN_FILE_INPUT_XPATH:'//input[@type="file"]',UPLOAD_SPINNER_XPATH:"//i[contains(text(), 'progress_activity')]",IMAGE_CROP_RATIO_DROPDOWN_XPATH:"//button[@role='combobox' and .//i[normalize-space(text())='arrow_drop_down'] and .//i[normalize-space(text())='crop_9_16' or normalize-space(text())='crop_16_9']]",IMAGE_CROP_RATIO_LANDSCAPE_XPATH:"//div[@role='option' and .//i[normalize-space(text())='crop_16_9']]",IMAGE_CROP_RATIO_PORTRAIT_XPATH:"//div[@role='option' and .//i[normalize-space(text())='crop_9_16']]",CROP_AND_SAVE_BUTTON_XPATH:"//button[.//i[normalize-space(text())='crop']]",IMAGE_POLICY_ERROR_POPUP_XPATH:"//li[@data-sonner-toast and .//i[normalize-space(text())='error'] and not(.//*[contains(., '5')])]",SETTINGS_BUTTON_XPATH:"//button[.//div[contains(., 'Veo')] and .//i[normalize-space(text())='volume_up' or normalize-space(text())='volume_off']]",OUTPUT_NUMBER_BUTTON_XPATH:"//button[@role='combobox' and .//span[not(.//i) and (normalize-space(.)='1' or normalize-space(.)='2' or normalize-space(.)='3' or normalize-space(.)='4')]]",OUTPUT_NUMBER_ONE_XPATH:"//div[@role='option' and .//span[text()='1']]",OUTPUT_NUMBER_TWO_XPATH:"//div[@role='option' and .//span[text()='2']]",OUTPUT_NUMBER_THREE_XPATH:"//div[@role='option' and .//span[text()='3']]",OUTPUT_NUMBER_FOUR_XPATH:"//div[@role='option' and .//span[text()='4']]",MODEL_SELECTION_BUTTON_XPATH:"//button[@role='combobox' and .//span[not(.//i)] and contains(normalize-space(),'Veo')]",MODEL_VEO_3_FAST_XPATH:"//div[@role='option' and contains(., 'Veo 3.1 - Fast')]",MODEL_VEO_3_FAST_LOW_XPATH:"//div[@role='option' and contains(., 'Veo 3.1 - Fast [Lower Priority]')]",MODEL_VEO_2_FAST_XPATH:"//div[@role='option' and contains(., 'Veo 2 - Fast')]",MODEL_VEO_3_QUALITY_XPATH:"//div[@role='option' and contains(., 'Veo 3.1 - Quality')]",MODEL_VEO_2_QUALITY_XPATH:"//div[@role='option' and contains(., 'Veo 2 - Quality')]",ASPECT_RATIO_DROPDOWN_XPATH:"//button[@role='combobox' and .//i[normalize-space(text())='crop_portrait' or normalize-space(text())='crop_landscape']]",LANDSCAPE_ASPECT_RATIO_XPATH:"//div[@role='option' and .//i[normalize-space(text())='crop_landscape']]",PORTRAIT_ASPECT_RATIO_XPATH:"//div[@role='option' and .//i[normalize-space(text())='crop_portrait']]",MODE_DROPDOWN_XPATH:"//button[@role='combobox' and .//i[normalize-space()='arrow_drop_down'] and .//div[@data-type='button-overlay']]",IMAGE_TO_VIDEO_MODE_XPATH:"//div[@role='option' and .//i[normalize-space(text())='photo_spark']]",TEXT_TO_VIDEO_MODE_XPATH:"//div[@role='option' and .//i[normalize-space(text())='text_analysis']]",RESULT_CONTAINER_XPATH:"//div[@data-index and @data-item-index]",PROMPT_IN_CONTAINER_XPATH:".//button[normalize-space(.) != '' and following-sibling::div//text()[contains(., 'Veo')]]",VIDEOS_IN_CONTAINER_XPATH:".//video[starts-with(@src, 'http')]"},authorInfo:{name:"Đặng Minh Đức",handle:"@duckmartians",website:"https://duckmartians.info",donateLink:"https://duckmartians.info"},otherTools:[{url:"https://discord.gg/munMZEBMw5",icon:"forum",title:{vi:"Cộng đồng Discord",en:"Discord Community"},description:{vi:"Nơi hỗ trợ, trao đổi và góp ý phát triển.",en:"A place for support, discussion, and feedback."}},{url:"https://github.com/duckmartians/G-Labs-Automation",icon:"smart_toy",title:{vi:"G-Labs Automation",en:"G-Labs Automation"},description:{vi:"Tự động hóa cho Whisk & Flow.",en:"Automation for Whisk & Flow."}},{url:"https://chromewebstore.google.com/detail/auto-meta-automation-for/bchhcfjoloinebjpbfklckgohpjehdmf",icon:"smart_toy",title:{vi:"Auto Meta (Extension)",en:"Auto Meta (Extension)"},description:{vi:"Tự động hóa cho Meta AI.",en:"Automation for Meta AI."}},{url:"https://chromewebstore.google.com/detail/auto-flow-prompt-automati/lhcmnhdbddgagibbbgppakocflbnknoa",icon:"hub",title:{vi:"Auto Flow (Extension)",en:"Auto Flow (Extension)"},description:{vi:"Tự động hóa cho Flow AI.",en:"Automation for Flow AI."}},{url:"https://chromewebstore.google.com/detail/auto-whisk-prompt-automat/gedfnhdibkfgacmkbjgpfjihacalnlpn",icon:"smart_toy",title:{vi:"Auto Whisk (Extension)",en:"Auto Whisk (Extension)"},description:{vi:"Tự động hóa cho Whisk AI.",en:"Automation for Whisk AI."}},{url:"https://github.com/duckmartians/YouTube_Downloader",icon:"download",title:{vi:"YouTube Downloader (Local)",en:"YouTube Downloader (Local)"},description:{vi:"Tải video, âm thanh, playlist và kênh YouTube.",en:"Download YouTube videos, audio, playlists, and channels."}},{url:"https://chromewebstore.google.com/detail/word-character-counter/ifpinabdnckhkojniimgnnmjgilkakbj",icon:"text_fields",title:{vi:"Đếm Từ & Ký Tự (Extension)",en:"Word & Character Counter (Extension)"},description:{vi:"Bộ đếm từ và ký tự thời gian thực.",en:"A real-time word and character counter."}},{url:"https://chromewebstore.google.com/detail/cookie-exporter/fhnmmidekmgocpjdceeffppcodigillk",icon:"cookie",title:{vi:"Trình Xuất Cookie (Extension)",en:"Cookie Exporter (Extension)"},description:{vi:"Xuất cookie của trang web một cách dễ dàng.",en:"Export website cookies with ease."}}]};export async function fetchConfigAndAuthorInfo(){try{const s=r;if(o.selectors=s.selectors||{},o.fetchedToolsList=s.otherTools||[],t.authorContainer&&s.authorInfo){const o=s.authorInfo;t.authorContainer.innerHTML=`<a href="${o.website||"#"}" target="_blank" rel="noopener noreferrer">by ${o.name}<br>${o.handle}</a>`}return t.donateLinkAnchor&&s.authorInfo&&(t.donateLinkAnchor.href=s.authorInfo.donateLink),n(),0===Object.keys(o.selectors).length?(e(a("log_load_selectors_fail"),"CRITICAL"),i(a("log_load_selectors_fail"),"error"),!1):(e(a("log_config_loaded_successfully")||"Config loaded successfully from local data","INFO"),!0)}catch(o){return e(a("log_config_fetch_exception",{error:o.message}),"CRITICAL"),i(a("log_config_load_error"),"error"),!1}}