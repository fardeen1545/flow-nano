import{dom as e}from"./dom.js";import{state as t}from"./state.js";export function loadSettings(a){const o=chrome.i18n.getUILanguage().split("-")[0],n={prompts:"",startFrom:1,language:["vi","en","hi","th","ur","bn","es"].includes(o)?o:"en",videoCount:"1",minInitialWait:30,maxInitialWait:60,autoDownload:!0,downloadFolder:"Flow Downloads",mode:"text-to-video",aspectRatio:"landscape",model:"default",lastRunMode:null,imageSort:"az",masterQueue:[],nextProjectCounter:1};chrome.storage.local.get(n,o=>{e.promptsTextarea.value=o.prompts,e.startFromInput.value=o.startFrom,e.repeatCountInput.value=o.videoCount,e.minInitialWaitTimeInput.value=o.minInitialWait,e.maxInitialWaitTimeInput.value=o.maxInitialWait,e.languageSelector.value=o.language,e.autoDownloadCheckbox.checked=o.autoDownload,e.modeSelector.value=o.mode,e.aspectRatioSelector.value=o.aspectRatio,e.modelSelector.value=o.model,e.imageSortSelector.value=o.imageSort,t.activeRunMode=o.lastRunMode,t.currentLang=o.language,t.currentMode=o.mode;const n=o.masterQueue||[];t.masterQueue=n.map(e=>({...e,repeatCount:e.repeatCount||o.videoCount||"1",model:e.model||o.model||"default",aspectRatio:e.aspectRatio||o.aspectRatio||"landscape"})),t.nextProjectCounter=o.nextProjectCounter,a&&a()})}